import React, { useState } from 'react';
import { Check, X, Star, DollarSign, Clock, Shield, ChevronDown, ChevronUp } from 'lucide-react';

const DeckingComparisonChart = () => {
  const [selectedProducts, setSelectedProducts] = useState([]);
  const [expandedBrands, setExpandedBrands] = useState({});
  
  const deckingOptions = [
    {
      id: 'composite-entry',
      name: 'Composite Decking - Entry Level',
      brands: ['Trex Enhance Basics', 'Deckorators Venture'],
      price: '$',
      priceValue: 1,
      durability: 7,
      maintenance: 8,
      appearance: 7,
      lifespan: '20-25 years',
      warranty: '25 years',
      tier: 'Entry',
      pros: ['Affordable composite option', 'Low maintenance', 'Splinter-free', '25-year warranty'],
      cons: ['Limited color options', 'Basic performance features', 'May show wear sooner'],
      image: 'üåü',
      color: 'bg-green-50 border-green-200',
      accentColor: 'text-green-600',
      description: 'Budget-friendly composite with essential benefits'
    },
    {
      id: 'composite-mid',
      name: 'Composite Decking - Mid-Tier',
      brands: ['Trex Select', 'Deckorators Vista', 'TimberTech Terrain'],
      price: '$$-$$$',
      priceValue: 2.5,
      durability: 8,
      maintenance: 9,
      appearance: 8,
      lifespan: '25-30 years',
      warranty: '25-30 years',
      tier: 'Mid-Tier',
      pros: ['Great value', 'Enhanced durability', 'Better color selection', 'Proven performance'],
      cons: ['Higher cost than entry', 'Still some limitations vs premium', 'May fade slightly over time'],
      image: '‚≠ê',
      color: 'bg-blue-50 border-blue-200',
      accentColor: 'text-blue-600',
      description: 'Best balance of performance and value'
    },
    {
      id: 'composite-premium',
      name: 'Composite Decking - Premium',
      brands: ['Trex Transcend', 'Deckorators Vault', 'Deckorators Voyage', 'TimberTech Harvest'],
      price: '$$$-$$$$',
      priceValue: 3.5,
      durability: 9,
      maintenance: 9,
      appearance: 9,
      lifespan: '25-30 years',
      warranty: '25-50 years',
      tier: 'Premium',
      pros: ['Superior fade resistance', 'Enhanced scratch resistance', 'Premium color options', 'Best warranties'],
      cons: ['Higher investment', 'Premium pricing', 'May require professional installation'],
      image: 'üèÜ',
      color: 'bg-purple-50 border-purple-200',
      accentColor: 'text-purple-600',
      description: 'High-performance composite with premium features'
    },
    {
      id: 'composite-ultra',
      name: 'Composite Decking - Ultra-Premium',
      brands: ['TimberTech Castle Gate', 'TimberTech Landmark'],
      price: '$$$$$-$$$$$$',
      priceValue: 5,
      durability: 10,
      maintenance: 10,
      appearance: 10,
      lifespan: '30+ years',
      warranty: 'Lifetime options',
      tier: 'Ultra-Premium',
      pros: ['Luxury appearance', 'Maximum durability', 'Lifetime warranties available', 'Superior performance'],
      cons: ['Highest investment', 'Premium installation required', 'Limited budget flexibility'],
      image: 'üíé',
      color: 'bg-amber-50 border-amber-200',
      accentColor: 'text-amber-600',
      description: 'Luxury composite decking with unmatched performance'
    },
    {
      id: 'pressure-treated',
      name: 'Pressure-Treated Wood',
      brands: ['Traditional PT Pine'],
      price: '$',
      priceValue: 1,
      durability: 6,
      maintenance: 4,
      appearance: 7,
      lifespan: '10-15 years',
      warranty: '1-2 years',
      tier: 'Budget',
      pros: ['Most affordable option', 'Natural wood look', 'Easy to work with', 'Readily available'],
      cons: ['Requires regular staining', 'Prone to warping/splitting', 'Chemical treatment concerns', 'High maintenance'],
      image: 'üå≤',
      color: 'bg-orange-50 border-orange-200',
      accentColor: 'text-orange-600',
      description: 'Traditional wood option for budget-conscious projects'
    }
  ];

  const toggleProduct = (productId) => {
    setSelectedProducts(prev => 
      prev.includes(productId) 
        ? prev.filter(id => id !== productId)
        : [...prev, productId]
    );
  };

  const toggleBrandExpansion = (productId) => {
    setExpandedBrands(prev => ({
      ...prev,
      [productId]: !prev[productId]
    }));
  };

  const getRatingStars = (rating) => {
    return Array.from({ length: 5 }, (_, i) => (
      <Star 
        key={i} 
        className={`w-4 h-4 ${i < rating ? 'text-yellow-400 fill-current' : 'text-gray-300'}`} 
      />
    ));
  };

  const getPriceDisplay = (priceValue) => {
    const fullDollars = Math.floor(priceValue);
    const hasHalf = priceValue % 1 !== 0;
    
    return (
      <div className="flex items-center">
        {Array.from({ length: 6 }, (_, i) => {
          let opacity = 'text-gray-300';
          if (i < fullDollars) opacity = 'text-green-500';
          else if (i === fullDollars && hasHalf) opacity = 'text-green-400 opacity-60';
          
          return (
            <DollarSign key={i} className={`w-4 h-4 ${opacity}`} />
          );
        })}
      </div>
    );
  };

  const displayedProducts = selectedProducts.length > 0 
    ? deckingOptions.filter(product => selectedProducts.includes(product.id))
    : deckingOptions;

  return (
    <div className="max-w-7xl mx-auto p-6 bg-gradient-to-br from-blue-50 to-green-50 min-h-screen">
      <div className="text-center mb-8">
        <h1 className="text-4xl font-bold text-gray-800 mb-4">
          üè° Professional Decking Material Guide
        </h1>
        <p className="text-lg text-gray-600 mb-6">
          Compare our complete range of decking materials by tier and performance
        </p>
        
        {/* Product Filter */}
        <div className="flex flex-wrap justify-center gap-3 mb-8">
          {deckingOptions.map(product => (
            <button
              key={product.id}
              onClick={() => toggleProduct(product.id)}
              className={`px-4 py-2 rounded-full border-2 transition-all duration-200 font-medium text-sm ${
                selectedProducts.includes(product.id)
                  ? `${product.color} ${product.accentColor} border-current shadow-md transform scale-105`
                  : 'bg-white text-gray-600 border-gray-300 hover:border-gray-400 hover:shadow-sm'
              }`}
            >
              {product.image} {product.tier}
            </button>
          ))}
          {selectedProducts.length > 0 && (
            <button
              onClick={() => setSelectedProducts([])}
              className="px-4 py-2 rounded-full bg-gray-100 text-gray-600 border-2 border-gray-300 hover:bg-gray-200 transition-all duration-200"
            >
              Show All
            </button>
          )}
        </div>
      </div>

      {/* Comparison Grid */}
      <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-2">
        {displayedProducts.map(product => (
          <div 
            key={product.id} 
            className={`${product.color} rounded-xl border-2 p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1`}
          >
            {/* Header */}
            <div className="text-center mb-6">
              <div className="text-4xl mb-3">{product.image}</div>
              <h3 className={`text-xl font-bold ${product.accentColor} mb-2`}>
                {product.name}
              </h3>
              <p className="text-sm text-gray-600 mb-3 italic">
                {product.description}
              </p>
              <div className="flex justify-center items-center gap-2 mb-2">
                <span className="text-sm text-gray-600">Price Range:</span>
                {getPriceDisplay(product.priceValue)}
                <span className="text-xs text-gray-500 ml-1">{product.price}</span>
              </div>
            </div>

            {/* Available Brands */}
            <div className="mb-6">
              <button
                onClick={() => toggleBrandExpansion(product.id)}
                className={`w-full flex items-center justify-between p-3 rounded-lg ${product.color} border border-current/20 hover:border-current/40 transition-colors`}
              >
                <span className={`font-semibold ${product.accentColor} text-sm`}>
                  Available Brands ({product.brands.length})
                </span>
                {expandedBrands[product.id] ? 
                  <ChevronUp className={`w-4 h-4 ${product.accentColor}`} /> : 
                  <ChevronDown className={`w-4 h-4 ${product.accentColor}`} />
                }
              </button>
              
              {expandedBrands[product.id] && (
                <div className="mt-2 space-y-1">
                  {product.brands.map((brand, index) => (
                    <div key={index} className="text-sm text-gray-700 pl-3 py-1 bg-white/50 rounded">
                      ‚Ä¢ {brand}
                    </div>
                  ))}
                </div>
              )}
            </div>

            {/* Ratings */}
            <div className="space-y-4 mb-6">
              <div className="flex justify-between items-center">
                <span className="text-sm font-medium text-gray-700">Durability</span>
                <div className="flex">
                  {getRatingStars(Math.round(product.durability / 2))}
                </div>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-sm font-medium text-gray-700">Low Maintenance</span>
                <div className="flex">
                  {getRatingStars(Math.round(product.maintenance / 2))}
                </div>
              </div>
              <div className="flex justify-between items-center">
                <span className="text-sm font-medium text-gray-700">Appearance</span>
                <div className="flex">
                  {getRatingStars(Math.round(product.appearance / 2))}
                </div>
              </div>
            </div>

            {/* Key Info */}
            <div className="space-y-3 mb-6">
              <div className="flex items-center gap-2">
                <Clock className="w-4 h-4 text-gray-500" />
                <span className="text-sm">
                  <strong>Expected Lifespan:</strong> {product.lifespan}
                </span>
              </div>
              <div className="flex items-center gap-2">
                <Shield className="w-4 h-4 text-gray-500" />
                <span className="text-sm">
                  <strong>Warranty:</strong> {product.warranty}
                </span>
              </div>
            </div>

            {/* Pros */}
            <div className="mb-4">
              <h4 className={`font-semibold ${product.accentColor} mb-2 text-sm`}>
                ‚úÖ Key Benefits
              </h4>
              <ul className="space-y-1">
                {product.pros.map((pro, index) => (
                  <li key={index} className="text-xs text-gray-700 flex items-start gap-1">
                    <Check className="w-3 h-3 text-green-500 mt-0.5 flex-shrink-0" />
                    {pro}
                  </li>
                ))}
              </ul>
            </div>

            {/* Cons */}
            <div className="mb-6">
              <h4 className={`font-semibold ${product.accentColor} mb-2 text-sm`}>
                ‚ö†Ô∏è Considerations
              </h4>
              <ul className="space-y-1">
                {product.cons.map((con, index) => (
                  <li key={index} className="text-xs text-gray-700 flex items-start gap-1">
                    <X className="w-3 h-3 text-amber-500 mt-0.5 flex-shrink-0" />
                    {con}
                  </li>
                ))}
              </ul>
            </div>

            {/* CTA Buttons */}
            <div className="space-y-3">
              <button className={`w-full py-3 px-4 ${product.accentColor} bg-white border-2 border-current rounded-lg font-semibold hover:bg-current hover:text-white transition-all duration-200 transform hover:scale-105`}>
                Get {product.tier} Quote
              </button>
              <button className={`w-full py-2 px-4 ${product.accentColor} bg-transparent border border-current/50 rounded-lg text-sm hover:border-current hover:bg-current/10 transition-all duration-200`}>
                View Product Details
              </button>
            </div>
          </div>
        ))}
      </div>

      {/* Brand Showcase */}
      <div className="mt-12 bg-white rounded-xl shadow-lg p-8">
        <h2 className="text-2xl font-bold text-center text-gray-800 mb-6">
          üèóÔ∏è Our Trusted Decking Partners
        </h2>
        <div className="grid md:grid-cols-3 gap-6 text-center">
          <div className="p-4 border rounded-lg">
            <h3 className="font-bold text-lg text-green-600 mb-2">TREX</h3>
            <p className="text-sm text-gray-600">America's #1 composite decking brand with proven performance</p>
          </div>
          <div className="p-4 border rounded-lg">
            <h3 className="font-bold text-lg text-blue-600 mb-2">DECKORATORS</h3>
            <p className="text-sm text-gray-600">Premium composite options with exceptional design flexibility</p>
          </div>
          <div className="p-4 border rounded-lg">
            <h3 className="font-bold text-lg text-purple-600 mb-2">TIMBERTECH</h3>
            <p className="text-sm text-gray-600">Luxury composite decking with industry-leading warranties</p>
          </div>
        </div>
      </div>

      {/* Bottom CTA */}
      <div className="text-center mt-12 p-8 bg-white rounded-xl shadow-lg">
        <h2 className="text-2xl font-bold text-gray-800 mb-4">
          Ready to Start Your Decking Project?
        </h2>
        <p className="text-gray-600 mb-6">
          Our experts will help you choose the perfect tier and brand for your needs and budget.
        </p>
        <div className="flex flex-wrap justify-center gap-4">
          <button className="px-8 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors duration-200 shadow-md hover:shadow-lg">
            Schedule Free Consultation
          </button>
          <button className="px-8 py-3 border-2 border-blue-600 text-blue-600 rounded-lg font-semibold hover:bg-blue-600 hover:text-white transition-all duration-200">
            View Our Portfolio
          </button>
          <button className="px-8 py-3 border-2 border-gray-400 text-gray-600 rounded-lg font-semibold hover:bg-gray-400 hover:text-white transition-all duration-200">
            Download Catalog
          </button>
        </div>
      </div>
    </div>
  );
};

export default DeckingComparisonChart;
